<div
  cdkOverlayOrigin
  #trigger="cdkOverlayOrigin"
  (click)="showList = !showList"
  [ngClass]="getModifierClass()"
  class="deviceSelector__main">
  <div class="deviceSelector__selectedName">
    {{ getSelectedDeviceName() }}
  </div>
  <div class="deviceSelector__openIcon">
    <span class="material-symbols-outlined">
      expand_more
    </span>
  </div>
</div>

<!-- TODO add open/close animation -->
<ng-template
  cdkConnectedOverlay
  [cdkConnectedOverlayOrigin]="trigger"
  [cdkConnectedOverlayOpen]="showList"
  [cdkConnectedOverlayPositions]="getOverlayPositions()"
  [cdkConnectedOverlayFlexibleDimensions]="true">
  <div class="deviceSelector__list">
    <div
      *ngFor="let wledIpAddress of wledIpAddresses"
      (click)="setSelectedDevice(wledIpAddress)"
      class="deviceSelector__listItem">
      <div class="deviceSelector__listItem__name">
        {{ wledIpAddress.name }}
      </div>
      <div class="deviceSelector__listItem__ipv4Address">
        {{ wledIpAddress.ipv4Address }}
      </div>
    </div>
    <div class="deviceSelector__listItem">
      <a
        [routerLink]="['/', 'controls', 'settings', 'network']"
        (click)="handleAddLinkClick($event)"
        class="deviceSelector__listItem__link">
        Add New
      </a>
    </div>
  </div>
</ng-template>